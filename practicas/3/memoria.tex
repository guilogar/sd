\documentclass{article}
\usepackage[spanish]{babel}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage[utf8]{inputenc}
\usepackage{fancyhdr}
\usepackage{lastpage}
\usepackage{enumitem}
\usepackage{listings}
\usepackage{verbatim}
\usepackage{float}

\pagestyle{fancy}
\fancyhf{}
\rfoot{Page \thepage\hspace{1pt} de~\pageref{LastPage}}

\title{Práctica 3}
\author{
Guillermo López García
\and
Guillermo Girón García
\and
Teodoro Martínez \ldots
}

\begin{document}
\maketitle
\textbf{1º Parte. Descripción de la actividad a realizar.}\\
Nuestro sistema se basa en informar de toda actividad de un usuario
en concreto de github a la plataforma de red social Twitter, y si es
posible, hacer una copia de seguridad de los ficheros afectados
del repositorio donde el usuario ha hecho los cambios que ha considerado
oportunos, en google drive, en dropbox o en cualquier otro sistemas
de ficheros optimo.

\textbf{2º Parte. Descripción de las partes a realizar.}\\
La actividad se ha descompuesto en 3 partes bien diferenciadas.
A continuación, las enumeramos.
\begin{enumerate}
    \item \underline{1º Parte (Guillermo López García)}: Esta parte se
        basa en la obtención de la información del usuario de GitHub mediante
        las claves de aplicación OAuth creada previamente en GitHub.
        Claro esta, este usuario debe proporcionar estas claves.
        A su vez, este programa se ejecuta cada cierto tiempo, haciendo spooling,
        y enviando a una cola del sistema rabbbitmq la información que haya cambiado.
        También, es necesario aclarar que el programa compara siempre la información,
        con otra almacenada previamente en una base de datos PostgreSQL\. Si la
        información cambia, el programa la refresca en la base de datos y, como se
        ha dicho antes, la introduce en forma de JSON en una cola del sistema
        rabbitmq.
    \item \underline{2º Parte (Guillermo Girón García)}:\ldots\ldots\ldots\ldots\ldots
    \item \underline{3º Parte (Teodoro Martínez \ldots)}:\ldots\ldots\ldots\ldots\ldots
\end{enumerate}

\textbf{3º Parte. Descripción de las tecnologías usadas.}\\
Las tecnologías usadas son las siguientes:
\begin{enumerate}
    \item \underline{1º Parte (Guillermo López García)}: En esta parte, se ha usado
        la base de datos relacional PostgreSQL, el lenguaje interpretado de servidor
        PHP, la librería Milo/GitHub para obtener los datos del usuario de GitHub
        (es posible su instalación mediante composer) y la librería PhpAmqpLib para
        poder realizar acciones sobre las colas del sistema rabbitmq (es posible su
        instalación mediante composer). Además, la versión del servidor apache es la
        2.2, la versión de PostgreSQL es la 9.5 y del interprete PHP es la 7.2
    \item \underline{2º Parte (Guillermo Girón García)}:\ldots\ldots\ldots\ldots\ldots
    \item \underline{3º Parte (Teodoro Martínez \ldots)}:\ldots\ldots\ldots\ldots\ldots
\end{enumerate}

\textbf{4º Parte. Código usado para realizar el programa.}
\begin{enumerate}
    \item \underline{1º Parte (Guillermo López García)}:
        \begin{enumerate}
            \item \underline{Base de Datos PostgreSQL}:
                \lstset{
                  language=SQL,
                  texcl=true,
                  basicstyle=\ttfamily,
                  columns=fullflexible,
                  frame=single,
                  breaklines=true,
                  postbreak=\mbox{\textcolor{red}{$\hookrightarrow$}\space},
                }
                \lstinputlisting[]{sql.sql}
            \item \underline{Código de Servidor PHP}:
                \lstset{
                  texcl=true,
                  basicstyle=\ttfamily,
                  columns=fullflexible,
                  frame=single,
                  breaklines=true,
                  postbreak=\mbox{\textcolor{red}{$\hookrightarrow$}\space},
                }
                \lstinputlisting[]{spooling_github.php}
            \item \underline{composer.json}:
                \lstinputlisting[]{composer.json}
        \end{enumerate}
    \item \underline{2º Parte (Guillermo Girón García)}:\ldots\ldots\ldots\ldots\ldots
    \item \underline{3º Parte (Teodoro Martínez \ldots)}:\ldots\ldots\ldots\ldots\ldots
\end{enumerate}

\textbf{5º Parte. Configuración del entorno.}
Como se habrá podido comprobar, en el codigo PHP anteriormente expuesto, se
han utilizado variables de entorno. Esto es así debido a que, no se quería
poner en el código las claves de la aplicación de OAuth de GitHub mediante el
uso de `Hard Code'. El archivo que se ha modificado del servidor apache 2.4
se llama envvars. A continuación se muestra el contenido del mismo, donde
se sustituye el valor de las claves anteriormente citadas por puntos suspensivos
(\ldots).

\lstset{
  texcl=true,
  basicstyle=\ttfamily,
  columns=fullflexible,
  frame=single,
  breaklines=true,
  postbreak=\mbox{\textcolor{red}{$\hookrightarrow$}\space},
}
\lstinputlisting[]{envvars}

\end{document}
